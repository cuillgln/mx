(function() {
	var History = mxLib.History = function() {
		this.path = [];
		this.animateId = null;
	}
	
	History.prototype.getPathData = function(rfId, begin, end) {
		var self = this;
		if (self.animateId) {
			canvasLayer.deletePathAnimate(self.animateId);
		}
		canvasLayer.clear();
		$.ajax({
			url : contextPath + "/staff/history?rfId=" + rfId + "&begin=" + begin + "&end=" + end,
			// url : contextPath + "/staff/history?rfId=45&begin=2014-03-20&end=2014-04-21",
			type : "GET",
			async : false,
			dataType : "json",
			success : function(data) {
				var points = [];
				for (var i = 0; i < data.length; i++) {
					var point = data[i].point;
					points.push(new mxLib.Point(point.x, point.y));
				}
				
				var shapePath = "M20.247267141666654,-60.126870000000004C20.247267141666654,-60.126870000000004,-18.579387621666662,-60.126870000000004,-18.579387621666662,-60.126870000000004C-21.630053328,-60.126870000000004,-24.126052559999998,-57.63087000000001,-24.126052559999998,-54.580203355C-24.126052559999998,-54.580203355,-24.126052559999998,-15.753536709999999,-24.126052559999998,-15.753536709999999C-24.126052559999998,-12.702870064999999,-21.630053328,-10.206870064999999,-18.579387621666662,-10.206870064999999C-18.579387621666662,-10.206870064999999,-7.486057680000002,-10.206870064999999,-7.486057680000002,-10.206870064999999C-7.486057680000002,-10.206870064999999,0.8339397599999998,-1.886870065,0.8339397599999998,-1.886870065C0.8339397599999998,-1.886870065,9.153937200000001,-10.206870065,9.153937200000001,-10.206870065C9.153937200000001,-10.206870065,20.247267141666654,-10.206870065,20.247267141666654,-10.206870065C23.297932847999995,-10.206870065,25.793932079999998,-12.702870064999999,25.793932079999998,-15.753536709999999C25.793932079999998,-15.753536709999999,25.793932079999998,-54.580203355,25.793932079999998,-54.580203355C25.793932079999998,-57.63087,23.297932848000002,-60.126870000000004,20.247267141666654,-60.126870000000004C20.247267141666654,-60.126870000000004,20.247267141666654,-60.126870000000004,20.247267141666654,-60.126870000000004M0.8339397599999998,-50.97487C4.993938479999997,-50.97487,8.321937456,-47.64687,8.321937456,-43.48687C8.321937456,-39.32687000000001,4.993938479999997,-35.998870000000004,0.8339397599999998,-35.998870000000004C-3.326058960000001,-35.998870000000004,-6.654057936000001,-39.32687,-6.654057936000001,-43.48687C-6.654057936000001,-47.64687,-3.326058960000001,-50.97487,0.8339397599999998,-50.97487C0.8339397599999998,-50.97487,0.8339397599999998,-50.97487,0.8339397599999998,-50.97487M17.473934639999996,-21.300203355C17.473934639999996,-21.300203355,-15.80605512,-21.300203355,-15.80605512,-21.300203355C-15.80605512,-21.300203355,-15.80605512,-23.796203355000003,-15.80605512,-23.796203355000003C-15.80605512,-29.342870000000005,-4.7127251783333435,-32.39353671000001,0.8339397599999998,-32.39353671000001C6.380604698333343,-32.39353671000001,17.473934639999996,-29.342870065,17.473934639999996,-23.796203355000003C17.473934639999996,-23.796203355000003,17.473934639999996,-21.300199,17.473934639999996,-21.300199";
				canvasLayer.addPolyline(points, {strokeColor:"blue", strokeWeight:2, strokeOpacity:0.5});
				self.animateId = canvasLayer.addPathAnimate(points, { pathData: shapePath, fillColor: "#ff00ff", time: 50, arrowScale: 10000 });
				canvasLayer.update();
			}
		});
	}
})();